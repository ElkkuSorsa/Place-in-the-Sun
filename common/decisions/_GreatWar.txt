greatwar = {
	ENG_intervene_greatwar = {
		ai_will_do = {
			base = 500
		}

		available = {
			has_completed_focus = ENG_engage_in_europe
			GER = {
				has_war_with = BEL
			}
		}

		visible = {
			original_tag = ENG
			has_government = democratic

			FRA = {
				has_war_with = GER
			}
		}

		days_remove = 5
		fire_only_once = yes

		remove_effect = {
			custom_effect_tooltip = historical_event_option
			news_event = ENG_news.2
			declare_war_on = {
				target = GER
				type = puppet_wargoal_focus
			}
			if = {
				limit = { NOT = has_war_with = FRA }
				FRA = {
					add_to_faction = ENG
				}
			}

		}
	}

	GER_schlieffen_plan = {
		ai_will_do = {
			base = 500
		}

		visible = {
			original_tag = GER
			has_war_with = FRA
		}

		days_remove = 5
		fire_only_once = yes

		remove_effect = {
			custom_effect_tooltip = historical_event_option
			add_timed_idea = {
				idea = GER_schlieffen_plan_idea
				days = 45
			}
			declare_war_on = {
				target = BEL
				type = puppet_wargoal_focus
			}

			declare_war_on = {
				target = LUX
				type = puppet_wargoal_focus
			}

			if = {
				limit = { has_country_flag = schlieffen_expanded }
				declare_war_on = {
					target = LUX
					type = puppet_wargoal_focus
				}
			}
		}
	}

	GER_surrender = {
		ai_will_do = {
			base = 500
		}

		available = {
			or = {
				surrender_progress > 0.3

			}
		}

		visible = {
			original_tag = GER
			has_war_with = FRA
		}

		fire_only_once = yes

		complete_effect = {
			
		}
	}

	FRA_surrender = {
		ai_will_do = {
			base = 500
		}

		available = {
			or = {
				surrender_progress > 0.7
				NOT = {
					controls_province = 11506
				}
			}
		}

		visible = {
			original_tag = FRA
			has_war_with = GER
		}

		fire_only_once = yes

		complete_effect = {
			
		}
	}

	mobilization = {
		ai_will_do = {
			base = 5000
		}

		visible = {
			is_in_faction_with = RUS
			RUS = {
				is_in_faction_with = FRA
			}
		}

		available = {
			has_active_mission = european_crisis
		}

		fire_only_once = yes

		complete_effect = {
			custom_effect_tooltip = historical_event_option
			if = {
				limit = { original_tag = RUS }
				give_guarantee = SER
			}
		}
	}

	european_crisis = {
		activation = {
			always = no
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = "The Great War"
				always = no
			}
		}

		days_mission_timeout = 30

		is_good = no

		timeout_effect = {
			AUH = {
				declare_war_on = {
					target = SER
					type = puppet_wargoal_focus
				}
			}
			
			if = {
				limit = { 
					SER = { 
						is_guaranteed_by = RUS
					}
				}
				if = {
					limit = { RUS = { is_in_faction_with = FRA } }
					FRA = { add_to_faction = SER }
				}

				else = {
					if = {
						limit = { RUS = { is_faction_leader = yes }}
						RUS = { add_to_faction = SER }
					}
					else = {
						RUS = {
							create_faction = "Slavic Pact"
							add_to_faction = SER
						}
					}
				}
			}
			else = {
				RUS = {
					remove_ideas = RUS_protector_of_slavs
					custom_effect_tooltip "Russia will no longer be seen as the protector of Slavs."
				}
			}
		}
	}
}

agadir_crisis = {

	agadir_timer = {
		activation = {
			always = no
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = "Agadir Crisis"
				always = no
			}
		}

		days_mission_timeout = 90

		is_good = no

		priority = 10

		complete_effect = {
			clr_global_flag = agadir_crisis
		}

		timeout_effect = {
			add_threat = -5
			news_event = agadir.9
		}
	}

	GER_intervene_in_morocco = {
		ai_will_do = {
			base = 5000
		}

		visible = {
			original_tag = GER
			has_global_flag = agadir_crisis
		}

		fire_only_once = yes

		complete_effect = {
			custom_effect_tooltip = historical_event_option
			hidden_effect = {
				news_event = agadir.2
				news_event = {
					id = agadir.8
					days = 21
				}
				every_country = {
					remove_mission = agadir_timer
				}
			}
			remove_mission = agadir_timer
		}
	}

	GER_withdraw_morocco = {
		ai_will_do = {
			base = 5000
		}

		visible = {
			original_tag = GER
			has_global_flag = agadir_crash
		}

		fire_only_once = yes

		complete_effect = {
			custom_effect_tooltip = historical_event_option
			FRA = {
				country_event = {
					id = agadir.4
					days = 3
				}
			}
		}
	}
}